{% extends "base.html" %}
{% block content %}
<div style="text-align: center; margin-top: 20px;">
  <img src="{{ url_for('static', filename='img/kitakongsi.png') }}" alt="logo1" />
</div>

<h2>Make a Donation</h2>
<form method="post" class="mt-4">
    <div class="mb-3">
        <label>Donation Type</label>
        <select name="donation_type" class="form-select" id="donationType">
            <option value="money">Select Type</option>
            <option value="money">Money</option>
            <option value="food">Food</option>
        </select>
    </div>

    <div id="moneyFields" class="mb-3">
        <label>Amount</label>
        <input type="number" name="amount" step="0.01" class="form-control" id="amount">
        
    </div>

    <div id="foodFields" class="mb-3 d-none">
        <label>Food Type</label>
        <!-- <input type="text" name="food_type" class="form-control"> -->
         <select name="food_type" class="form-select" id="food_type">
            <option value="">Select Food</option>
            <option value="Rice">Rice</option>
            <option value="Vegetable Oil">Vegetable Oil</option>
            <option value="Lentils or beans">Lentils or beans</option>
            <option value="Salt">Salt </option>
        </select>
        <label class="mt-2">Quantity</label>
        <input type="number" name="quantity" class="form-control" id="quantity">
    </div>



    <button class="btn btn-success mt-3" type="submit">Donate</button>
</form>

<!-- Your existing donation form here -->

<!-- <h2>Donation and Request History</h2>
<table cellpadding="5" cellspacing="0" style="width:100%; max-width:700px; margin:auto;">
    <thead>
        <tr style="background-color:#4CAF50; color:white;">
            <th>No.</th>
            <th>Type</th>
            <th>Details</th>
            <th>Timestamp</th>
        </tr>
    </thead>
    <tbody>
        {% for tx in transactions %}
        <tr style="background-color: white">
            <td>{{ loop.index }}</td>
            <td>{{ tx.type.replace('_', ' ').title() }}</td>
            <td>
                {% if tx.type == 'money_donation' or tx.type == 'money_request' %}
                    Amount: RM {{ "%.2f"|format(tx.amount) }}
                {% elif tx.type == 'food_donation' or tx.type == 'food_request' %}
                    Food: {{ tx.food_type }}, Quantity: {{ tx.quantity }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td>{{ tx.timestamp }}</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4" style="text-align:center;">No transactions found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table> -->




<h2 style="color:#333; text-align:center; margin-bottom:20px;">Current Balances</h2>

<div style="max-width:600px; margin:auto; padding:15px; background:#f9f9f9; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <p style="font-size:18px; margin-bottom:10px;">
        <strong>Money:</strong> 
        <span style="color:green; font-weight:bold;">RM{{ money_balance }}</span>
    </p>

    <h3 style="margin-top:15px; margin-bottom:10px; color:#4CAF50;">Food Inventory</h3>
    <table style="width:100%; border-collapse:collapse; text-align:center; background:white; border-radius:8px; overflow:hidden;">
        <thead>
            <tr style="background-color:#4CAF50; color:white;">
                <th style="padding:8px;">Food Type</th>
                <th style="padding:8px;">Quantity</th>
            </tr>
        </thead>
        <tbody>
            {% for food, qty in food_balance.items() %}
            <tr style="border-bottom:1px solid #ddd;">
                <td style="padding:8px;">{{ food.title() }}</td>
                <td style="padding:8px;">{{ qty }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="2" style="padding:8px; color:#999;">No food available</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


<script>
document.getElementById("donationType").addEventListener("change", function(){
    document.getElementById("moneyFields").classList.toggle("d-none", this.value !== "money");
    document.getElementById("foodFields").classList.toggle("d-none", this.value !== "food");
});
</script>
{% endblock %}
